<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 4 Hotspots en R | Manual para la Identificación de los hotspots del dengue en áreas urbanas de México</title>
  <meta name="description" content="El manual describe la Identificación de los hotspots en R" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 4 Hotspots en R | Manual para la Identificación de los hotspots del dengue en áreas urbanas de México" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://fdzul.github.io/manual_hotspots/" />
  <meta property="og:image" content="https://fdzul.github.io/manual_hotspots//images/cover.jpg" />
  <meta property="og:description" content="El manual describe la Identificación de los hotspots en R" />
  <meta name="github-repo" content="fdzul/manual_hotspots" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 4 Hotspots en R | Manual para la Identificación de los hotspots del dengue en áreas urbanas de México" />
  
  <meta name="twitter:description" content="El manual describe la Identificación de los hotspots en R" />
  <meta name="twitter:image" content="https://fdzul.github.io/manual_hotspots//images/cover.jpg" />

<meta name="author" content="Felipe Antonio Dzul Manzanilla" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="hotspots.html"/>
<link rel="next" href="clusters.html"/>
<script src="libs/header-attrs-2.8.4/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.17/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><span style= "color:#660033; font-size:15px; font-weight: bold;">Hotspot del Dengue en R</span></a></li>

<li class="divider"></li>
<li><a href="index.html#welcome"><strong><span style="color:#003300;">Welcome</span></strong></a></li>
<li class="part"><span><b>I Sección</b></span></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> <strong><span style="color:#003300;">Introducción </span></strong></a></li>
<li class="chapter" data-level="2" data-path="objetivos.html"><a href="objetivos.html"><i class="fa fa-check"></i><b>2</b> <strong><span style="color:#003300;"> Objetivo </span></strong></a></li>
<li class="part"><span><b>II Sección</b></span></li>
<li class="chapter" data-level="3" data-path="hotspots.html"><a href="hotspots.html"><i class="fa fa-check"></i><b>3</b> <strong><span style="color:#003300;">Hotspots</span></strong></a>
<ul>
<li class="chapter" data-level="3.1" data-path="hotspots.html"><a href="hotspots.html#análisis-de-la-información-epidemiológica-y-entomológica"><i class="fa fa-check"></i><b>3.1</b> <strong><span style="color:#003300;">Análisis de la Información epidemiológica y entomológica</span></strong></a></li>
<li class="chapter" data-level="3.2" data-path="hotspots.html"><a href="hotspots.html#hotspots-de-transmisión-histórica"><i class="fa fa-check"></i><b>3.2</b> <strong><span style="color:#003300;">Hotspots de transmisión histórica</span></strong></a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="hotspots.html"><a href="hotspots.html#algoritmo-para-el-cálculo-de-los-hotspots"><i class="fa fa-check"></i><b>3.2.1</b> <span style="color:#003300;">Algoritmo para el cálculo de los Hotspots</span></a></li>
<li class="chapter" data-level="3.2.2" data-path="hotspots.html"><a href="hotspots.html#referencias"><i class="fa fa-check"></i><b>3.2.2</b> <strong><span style="color:#003300;">Referencias</span></strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="hotspotsr.html"><a href="hotspotsr.html"><i class="fa fa-check"></i><b>4</b> <strong><span style="color:#003300;">Hotspots en R</span></strong></a>
<ul>
<li class="chapter" data-level="4.1" data-path="hotspotsr.html"><a href="hotspotsr.html#bajar-las-bases-de-datos-del-sinave."><i class="fa fa-check"></i><b>4.1</b> <strong><span style="color:#003300;">Bajar las bases de datos del <span>SINAVE</span>.</span></strong></a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="hotspotsr.html"><a href="hotspotsr.html#escribir-en-el-buscador-de-preferencia-la-página-del-sinave-httpswww.sinave.gob.mx."><i class="fa fa-check"></i><b>4.1.1</b> <strong><span style="color:#660033;">Escribir en el buscador de preferencia la página del sinave (<span>https://www.sinave.gob.mx/</span>).</span></strong></a></li>
<li class="chapter" data-level="4.1.2" data-path="hotspotsr.html"><a href="hotspotsr.html#en-la-página-del-sinave-buscar-y-darle-click-al-boton-enfermedades-transmitidas-por-vector."><i class="fa fa-check"></i><b>4.1.2</b> <strong><span style="color:#660033;">En la página del sinave buscar y darle click al boton Enfermedades Transmitidas por Vector.</span></strong></a></li>
<li class="chapter" data-level="4.1.3" data-path="hotspotsr.html"><a href="hotspotsr.html#ingresar-el-nombre-del-usurio-y-contraseña."><i class="fa fa-check"></i><b>4.1.3</b> <strong><span style="color:#660033;">Ingresar el nombre del usurio y contraseña.</span></strong></a></li>
<li class="chapter" data-level="4.1.4" data-path="hotspotsr.html"><a href="hotspotsr.html#ingresar-a-la-sección-de-reportes."><i class="fa fa-check"></i><b>4.1.4</b> <span style="color:#660033;">Ingresar a la sección de <strong>Reportes</strong>.</span></a></li>
<li class="chapter" data-level="4.1.5" data-path="hotspotsr.html"><a href="hotspotsr.html#darle-click-a-descarga-de-datos-vectores"><i class="fa fa-check"></i><b>4.1.5</b> <span style="color:#660033;">Darle click a <strong>Descarga de Datos Vectores</strong></span></a></li>
<li class="chapter" data-level="4.1.6" data-path="hotspotsr.html"><a href="hotspotsr.html#bajar-la-base-de-datos-de-la-última-fecha-de-la-enfermedad-de-interés."><i class="fa fa-check"></i><b>4.1.6</b> <strong><span style="color:#660033;">Bajar la base de datos de la última fecha de la enfermedad de interés.</span></strong></a></li>
<li class="chapter" data-level="4.1.7" data-path="hotspotsr.html"><a href="hotspotsr.html#guardar-la-base-en-la-carpeta-de-interes."><i class="fa fa-check"></i><b>4.1.7</b> <strong><span style="color:#660033;">Guardar la base en la carpeta de interes.</span></strong></a></li>
<li class="chapter" data-level="4.1.8" data-path="hotspotsr.html"><a href="hotspotsr.html#extraer-el-txt-del-archivo-con-extensión-rar."><i class="fa fa-check"></i><b>4.1.8</b> <strong><span style="color:#660033;">Extraer el txt del archivo con extensión RAR.</span></strong></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="hotspotsr.html"><a href="hotspotsr.html#geocodificación-de-la-base-de-datos-de-dengue."><i class="fa fa-check"></i><b>4.2</b> <strong><span style="color:#003300;">Geocodificación de la base de datos de Dengue.</span></strong></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="hotspotsr.html"><a href="hotspotsr.html#subir-la-base-de-datos-de-dengue-a"><i class="fa fa-check"></i><b>4.2.1</b> <strong><span style="color:#660033;">Subir la base de datos de Dengue a</span></strong> <img src="https://d33wubrfki0l68.cloudfront.net/62bcc8535a06077094ca3c29c383e37ad7334311/a263f/assets/img/logo.svg" style="width:10.0%" /></a></li>
<li class="chapter" data-level="4.2.2" data-path="hotspotsr.html"><a href="hotspotsr.html#subir-el-csv-a-y-creamos-el-vector-de-direcciones"><i class="fa fa-check"></i><b>4.2.2</b> <strong><span style="color:#660033;">Subir el csv a</span></strong> <img src="https://d33wubrfki0l68.cloudfront.net/62bcc8535a06077094ca3c29c383e37ad7334311/a263f/assets/img/logo.svg" style="width:10.0%" /> <strong><span style="color:#003300;">y creamos el vector de direcciones</span></strong></a></li>
<li class="chapter" data-level="4.2.3" data-path="hotspotsr.html"><a href="hotspotsr.html#realizar-la-geocodificación"><i class="fa fa-check"></i><b>4.2.3</b> <strong><span style="color:#660033;">Realizar la geocodificación</span></strong></a></li>
<li class="chapter" data-level="4.2.4" data-path="hotspotsr.html"><a href="hotspotsr.html#guardar-la-información-en-rdata"><i class="fa fa-check"></i><b>4.2.4</b> <strong><span style="color:#660033;">Guardar la información en RData</span></strong></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="hotspotsr.html"><a href="hotspotsr.html#bajar-los-shapefile-del-inegi."><i class="fa fa-check"></i><b>4.3</b> <strong><span style="color:#003300;">Bajar los shapefile del <span>INEGI</span>.</span></strong></a></li>
<li class="chapter" data-level="4.4" data-path="hotspotsr.html"><a href="hotspotsr.html#contar-el-número-de-casos-por-ageb-agregación-espacial."><i class="fa fa-check"></i><b>4.4</b> <strong><span style="color:#003300;">Contar el número de casos por AGEB (agregación espacial).</span></strong></a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="hotspotsr.html"><a href="hotspotsr.html#subir-la-base-datos-geocodificada."><i class="fa fa-check"></i><b>4.4.1</b> <strong><span style="color:#660033;">subir la base datos geocodificada.</span></strong></a></li>
<li class="chapter" data-level="4.4.2" data-path="hotspotsr.html"><a href="hotspotsr.html#subir-los-agebs."><i class="fa fa-check"></i><b>4.4.2</b> <strong><span style="color:#660033;">subir los AGEBs.</span></strong></a></li>
<li class="chapter" data-level="4.4.3" data-path="hotspotsr.html"><a href="hotspotsr.html#realizar-la-agregación-espacial."><i class="fa fa-check"></i><b>4.4.3</b> <strong><span style="color:#660033;"> Realizar la agregación espacial.</span></strong></a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="hotspotsr.html"><a href="hotspotsr.html#pasos-6-10.-cálcular-el-z-score-de-los-casos-a-calcular-los-hotspots."><i class="fa fa-check"></i><b>4.5</b> <strong><span style="color:#003300;">Pasos 6-10. Cálcular el Z-score de los casos a Calcular los hotspots.</span></strong></a></li>
<li class="chapter" data-level="4.6" data-path="hotspotsr.html"><a href="hotspotsr.html#visualizar-los-hotspots."><i class="fa fa-check"></i><b>4.6</b> <strong><span style="color:#003300;">Visualizar los hotspots.</span></strong></a></li>
</ul></li>
<li class="part"><span><b>III Sección</b></span></li>
<li class="chapter" data-level="5" data-path="clusters.html"><a href="clusters.html"><i class="fa fa-check"></i><b>5</b> <strong><span style="color:#003300;">Clusters de transmisión </span></strong></a>
<ul>
<li class="chapter" data-level="5.1" data-path="clusters.html"><a href="clusters.html#identificación-de-clusters-de-transmisión"><i class="fa fa-check"></i><b>5.1</b> <span style="color:#003300;"><strong>Identificación de clusters de transmisión</strong></span></a></li>
<li class="chapter" data-level="5.2" data-path="clusters.html"><a href="clusters.html#algoritmo-para-space-time-análisis-con-satscan"><i class="fa fa-check"></i><b>5.2</b> <span style="color:#003300;">Algoritmo para <strong>Space-Time análisis</strong> con <strong><span>SaTScan</span></strong></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="clustersr.html"><a href="clustersr.html"><i class="fa fa-check"></i><b>6</b> <strong><span style="color:#003300;">Clusters de Transmisión en R</span></strong></a>
<ul>
<li class="chapter" data-level="6.1" data-path="clustersr.html"><a href="clustersr.html#identificación-de-los-cluster-de-transmisión-en-r"><i class="fa fa-check"></i><b>6.1</b> <strong><span style="color:#003300;">Identificación de los cluster de transmisión en R</span></strong></a></li>
<li class="chapter" data-level="6.2" data-path="clustersr.html"><a href="clustersr.html#generar-los-archivos-cas-y-geo."><i class="fa fa-check"></i><b>6.2</b> <strong><span style="color:#003300;">Generar los archivos cas y geo</span></strong>.</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="clustersr.html"><a href="clustersr.html#paso-1.-subir-la-base-de-datos-geocodificada."><i class="fa fa-check"></i><b>6.2.1</b> <strong><span style="color:#003300;">Paso 1. Subir la base de datos geocodificada</span></strong>.</a></li>
<li class="chapter" data-level="6.2.2" data-path="clustersr.html"><a href="clustersr.html#paso-2.-subir-las-funciones-."><i class="fa fa-check"></i><b>6.2.2</b> <strong><span style="color:#003300;">Paso 2. Subir las funciones </span></strong>.</a></li>
<li class="chapter" data-level="6.2.3" data-path="clustersr.html"><a href="clustersr.html#paso-3.-aplicar-las-funciones."><i class="fa fa-check"></i><b>6.2.3</b> <strong><span style="color:#003300;">Paso 3. Aplicar las funciones</span></strong>.</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="clustersr.html"><a href="clustersr.html#definir-los-parametros-del-input-análisis-y-resultado-output."><i class="fa fa-check"></i><b>6.3</b> <strong><span style="color:#003300;">Definir los parametros del input, análisis y resultado (output).</span></strong></a></li>
</ul></li>
<li class="part"><span><b>IV Sección</b></span></li>
<li class="chapter" data-level="7" data-path="cadenas.html"><a href="cadenas.html"><i class="fa fa-check"></i><b>7</b> <strong><span style="color:#003300;">Cadenas de Transmisión</span></strong></a>
<ul>
<li class="chapter" data-level="7.1" data-path="cadenas.html"><a href="cadenas.html#space-time-con-knox-test"><i class="fa fa-check"></i><b>7.1</b> <span style="color:#003300;"><strong>Space-Time con Knox test</strong></span></a></li>
<li class="chapter" data-level="7.2" data-path="cadenas.html"><a href="cadenas.html#algorítmo-para-realizar-la-prueba-de-knox"><i class="fa fa-check"></i><b>7.2</b> <strong><span style="color:#003300;">Algorítmo para realizar la prueba de knox</span></strong></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="cadenasr.html"><a href="cadenasr.html"><i class="fa fa-check"></i><b>8</b> <strong><span style="color:#003300;">Cadenas de Transmisión en R</span></strong></a>
<ul>
<li class="chapter" data-level="8.1" data-path="cadenasr.html"><a href="cadenasr.html#identificación-de-cadenas-de-transmisión-en-r"><i class="fa fa-check"></i><b>8.1</b> <strong><span style="color:#003300;">Identificación de cadenas de transmisión en R</span></strong></a></li>
<li class="chapter" data-level="8.2" data-path="cadenasr.html"><a href="cadenasr.html#knox-test"><i class="fa fa-check"></i><b>8.2</b> <strong><span style="color:#003300;">Knox test</span></strong></a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="cadenasr.html"><a href="cadenasr.html#visualización-de-las-cadenas-de-transmisión"><i class="fa fa-check"></i><b>8.2.1</b> <strong><span style="color:#003300;">Visualización de las cadenas de Transmisión </span></strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="lgcp.html"><a href="lgcp.html"><i class="fa fa-check"></i><b>9</b> <strong><span style="color:#003300;">Spatial LGCP</span></strong></a></li>
<li class="chapter" data-level="10" data-path="lgcpr.html"><a href="lgcpr.html"><i class="fa fa-check"></i><b>10</b> <strong><span style="color:#003300;">Spatial LGCP en R</span></strong></a></li>
<li class="divider"></li>
<li><a href="https://github.com/fdzul" target="blank"> <span style= "color:#660033; font-size:15px; font-weight: bold;">Felipe Dzul-Manzanilla</span> </a></li>
<li><a href="https://www.researchgate.net/profile/Fabian-Correa-Morales" target="blank"><span style= "color:#660033; font-size:15px; font-weight: bold;">Fabián Correa-Morales</span></a></li>
<li><a href="https://www.ssaver.gob.mx/directorio-sesver/dsaludpublica/arturo-baez-hernandez/" target="blank"><span style= "color:#660033; font-size:15px; font-weight: bold;">Arturo Báez-Hernández</span></a></li>
<li><a href="https://www.ssaver.gob.mx/directorio-sesver/dsaludpublica/guadalupe-diaz-del-castillo-flores/" target="blank"><span style= "color:#660033; font-size:15px; font-weight: bold;">Guadalupe Díaz del Castillo Flores</span></a></li>
<li><a href="" target="blank"> <span style= "color:#660033; font-size:15px; font-weight: bold;">Heron Huerta</span> </a></li>
<img src="https://www.ssaver.gob.mx/wp-content/uploads/2021/04/cropped-logoencabezado6abr2.jpg" alt="SESVER" width="250" height="50">
<img src="https://raw.githubusercontent.com/mxabierto/assets/master/img/logos/cenaprece.png" alt="SESVER" width="250" height="100">
<img src="https://www.genolifeadn.com/wp-content/uploads/2020/04/indrelogo.png" alt="SESVER" width="100" height="50">

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><span style="color:#003300;">Manual para la Identificación de los hotspots del dengue en áreas urbanas de México</span></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="hotspotsr" class="section level1" number="4">
<h1><span class="header-section-number">Capítulo 4</span> <strong><span style="color:#003300;">Hotspots en R</span></strong></h1>
<div id="bajar-las-bases-de-datos-del-sinave." class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> <strong><span style="color:#003300;">Bajar las bases de datos del <a href="https://www.sinave.gob.mx/">SINAVE</a>.</span></strong></h2>
<div id="escribir-en-el-buscador-de-preferencia-la-página-del-sinave-httpswww.sinave.gob.mx." class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> <strong><span style="color:#660033;">Escribir en el buscador de preferencia la página del sinave (<a href="https://www.sinave.gob.mx/" class="uri">https://www.sinave.gob.mx/</a>).</span></strong></h3>
</div>
<div id="en-la-página-del-sinave-buscar-y-darle-click-al-boton-enfermedades-transmitidas-por-vector." class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> <strong><span style="color:#660033;">En la página del sinave buscar y darle click al boton Enfermedades Transmitidas por Vector.</span></strong></h3>
<p><img src="https://www.sinave.gob.mx/imagenes4t/imagen9_.png" /></p>
<p><img src="https://www.sinave.gob.mx/imagenes4t/imagen1.png" alt="Kitten"
    title="A cute kitten" width="150" height="100" /></p>
</div>
<div id="ingresar-el-nombre-del-usurio-y-contraseña." class="section level3" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> <strong><span style="color:#660033;">Ingresar el nombre del usurio y contraseña.</span></strong></h3>
<p><img src="https://vectores.sinave.gob.mx/Imagenes/ImagenesComunes/user3.jpg" /></p>
</div>
<div id="ingresar-a-la-sección-de-reportes." class="section level3" number="4.1.4">
<h3><span class="header-section-number">4.1.4</span> <span style="color:#660033;">Ingresar a la sección de <strong>Reportes</strong>.</span></h3>
<p><img src="https://vectores.sinave.gob.mx/Imagenes/ImagenesComunes/me_reg_1.jpg" />
<img src="https://vectores.sinave.gob.mx/Imagenes/ImagenesComunes/me_seg_1.jpg" />
<img src="https://vectores.sinave.gob.mx/Imagenes/ImagenesComunes/me_rep_1.jpg" />
<img src="https://vectores.sinave.gob.mx/Imagenes/ImagenesComunes/me_sal_1.jpg" /></p>
</div>
<div id="darle-click-a-descarga-de-datos-vectores" class="section level3" number="4.1.5">
<h3><span class="header-section-number">4.1.5</span> <span style="color:#660033;">Darle click a <strong>Descarga de Datos Vectores</strong></span></h3>
<td align="center">
<p><input type="submit" name="ctl00$ContentPlaceHolder1$Button3" value="Descarga de Datos Vectores" onclick="javascript:Reporte3();" id="ctl00_ContentPlaceHolder1_Button3" style="color:White;background-color:#666666;border-color:#000066;font-weight:bold;" /></p>
</div>
<div id="bajar-la-base-de-datos-de-la-última-fecha-de-la-enfermedad-de-interés." class="section level3" number="4.1.6">
<h3><span class="header-section-number">4.1.6</span> <strong><span style="color:#660033;">Bajar la base de datos de la última fecha de la enfermedad de interés.</span></strong></h3>
</div>
<div id="guardar-la-base-en-la-carpeta-de-interes." class="section level3" number="4.1.7">
<h3><span class="header-section-number">4.1.7</span> <strong><span style="color:#660033;">Guardar la base en la carpeta de interes.</span></strong></h3>
</div>
<div id="extraer-el-txt-del-archivo-con-extensión-rar." class="section level3" number="4.1.8">
<h3><span class="header-section-number">4.1.8</span> <strong><span style="color:#660033;">Extraer el txt del archivo con extensión RAR.</span></strong></h3>
</div>
</div>
<div id="geocodificación-de-la-base-de-datos-de-dengue." class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> <strong><span style="color:#003300;">Geocodificación de la base de datos de Dengue.</span></strong></h2>
<p>La geocodificación es el proceso de transformar las direcciones físicas de los domicilios a coordenadas geográficas (latitud y longitud). La geocodificación se realiza a través del servicio de Geocoding API de google y con la función <span style="color:RoyalBlue"><strong><em>ggmap::geocode</em></strong></span> del paquete <a href="https://github.com/dkahle/ggmap">ggmap</a>. El proceso de geocodificación se realiza en cinco pasos, el primer paso es subir la base o las bases de datos de Dengue a <strong><a href="https://www.rstudio.com/">RStudio</a></strong> y extraer la información del estado y municipio de interes de la semana pasada y la semana actual. Dado que la frecuencia de la geocodificación es semanal y las bases de dengue son bases de datos acumulados, se requiere extraer de la base de la actual semana los casos no geocodificados (casos nuevos, casos de la presente semana), finalmente el archivo se guarda con extensión csv. En el paso dos, el archivo csv se sube a <strong><a href="https://www.rstudio.com/">RStudio</a></strong>, se crea un vector de direcciones con la columna IDE_CAL, NUM_EXT, IDE_COL, IDE_CP, DES_MPO_RES, y posteriormente se realiza una manipulación del texto (por ejemplo, se sustituye # por NUMERO). En el tercer paso se utiliza la función para <strong><em><a href="">denhotspots::geocoden</a></em></strong> realizar la geocodificación, en el cuarto paso se eliminan los duplicados y se guarda la información en un archivo con extensión RData, y en el <strong>quinto paso se realiza el control de calidad de la geocodificación</strong>.</p>
<div id="subir-la-base-de-datos-de-dengue-a" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> <strong><span style="color:#660033;">Subir la base de datos de Dengue a</span></strong> <img src="https://d33wubrfki0l68.cloudfront.net/62bcc8535a06077094ca3c29c383e37ad7334311/a263f/assets/img/logo.svg" style="width:10.0%" /></h3>
<div id="subir-la-base-de-datos-de-dengue-de-la-semana-actual." class="section level4" number="4.2.1.1">
<h4><span class="header-section-number">4.2.1.1</span> <strong><span style="color:#660033;">Subir la base de datos de dengue de la semana actual.</span></strong></h4>
<p>Para subir a <strong><a href="https://www.rstudio.com/">RStudio</a></strong> las bases de datos de dengue de la semana actual se realiza atraves de la función <strong><em><a href="">denhotspots::read_den_dataset</a></em></strong>. La función tiene dos objetivos, 1) subir la base de datos y 2) extraer los casos de dengue confirmados del municipio y del estado definido en los argumentos. La función <strong><em><a href="">read_den_dataset</a></em></strong> tiene tres argumentos: <strong><span style="color:#7d9029">x</span></strong> para definir el directorio de la carpeta donde se guardó la base de datos de dengue que se bajó del <strong><a href="">SINAVE</a></strong>, <strong><span style="color:#7d9029">des_edo_res</span></strong> para definir el estado de residencia de los casos y
<strong><span style="color:#7d9029">des_mpo_res</span></strong> para definir el municipio al cual pertenece la localidad de los casos que se desea analizar. La extración de casos de dengue a nivel de municipio obedece a que en muchas localidades o ciudades que han crecido en los últimos diez o más años, muchas de las localidades alrededor de ellas se han convertido en colonias de las periferia y se han fusionado al área urbana. Pero en las bases de datos de dengue aún se manejan como localidades y extraer solo los casos de dengue de la cabecera municipal, dejaría fuera todas colonias (localidades) que se han integrado en el area urbana de la cabecera municipal.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="hotspotsr.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  codigo para subir la base de datos de la semana actual</span></span>
<span id="cb1-2"><a href="hotspotsr.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1-3"><a href="hotspotsr.html#cb1-3" aria-hidden="true" tabindex="-1"></a>y  <span class="ot">&lt;-</span> denhotspots<span class="sc">::</span><span class="fu">read_den_dataset</span>(<span class="at">x =</span> <span class="st">&quot;C:/Users/felip/Dropbox/manual_hotspots_veracruz/1.Datasets/DENGUE2_.txt&quot;</span>, </span>
<span id="cb1-4"><a href="hotspotsr.html#cb1-4" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">des_edo_res =</span> <span class="st">&quot;VERACRUZ&quot;</span>,</span>
<span id="cb1-5"><a href="hotspotsr.html#cb1-5" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">des_mpo_res =</span> <span class="st">&quot;POZA RICA DE HIDALGO&quot;</span>) </span></code></pre></div>
</div>
<div id="subir-la-base-de-datos-de-dengue-de-la-semana-pasada" class="section level4" number="4.2.1.2">
<h4><span class="header-section-number">4.2.1.2</span> <strong><span style="color:#660033;">Subir la base de datos de dengue de la semana pasada</span></strong></h4>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="hotspotsr.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb2-2"><a href="hotspotsr.html#cb2-2" aria-hidden="true" tabindex="-1"></a>x  <span class="ot">&lt;-</span> denhotspots<span class="sc">::</span><span class="fu">read_den_dataset</span>(<span class="at">x =</span> <span class="st">&quot;C:/Users/felip/Dropbox/manual_hotspots_veracruz/1.Datasets/DENGUE2_.txt&quot;</span>, </span>
<span id="cb2-3"><a href="hotspotsr.html#cb2-3" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">des_edo_res =</span> <span class="st">&quot;VERACRUZ&quot;</span>,</span>
<span id="cb2-4"><a href="hotspotsr.html#cb2-4" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">des_mpo_res =</span> <span class="st">&quot;POZA RICA DE HIDALGO&quot;</span>)</span></code></pre></div>
</div>
<div id="ordenar-la-base-por-el-id-del-paciente-y-extraer-los-casos-no-geocodificados-de-la-semana-actual." class="section level4" number="4.2.1.3">
<h4><span class="header-section-number">4.2.1.3</span> <strong><span style="color:#660033;">Ordenar la base por el ID del paciente y extraer los casos no geocodificados de la semana actual.</span></strong></h4>
<p>Este paso asegura que solo los casos que se agregaron la semana actual sean geocodificados, debido a que el orden de los casos cambian de manera que se suben los casos. Es decir que los casos nuevos no se agrégan después del último caso, sino en un orden desconocido para el programa de vectors. Esta es la razón por que se extraen solo los casos que no se geocodificaron la semana pasada a través del identificador único del paciente (VEC_ID).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="hotspotsr.html#cb3-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> y <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="hotspotsr.html#cb3-2" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span>VEC_ID <span class="sc">%in%</span> <span class="fu">c</span>(x<span class="sc">$</span>VEC_ID)) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="hotspotsr.html#cb3-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(VEC_ID)</span></code></pre></div>
</div>
<div id="guardar-el-resultado" class="section level4" number="4.2.1.4">
<h4><span class="header-section-number">4.2.1.4</span> <strong><span style="color:#660033;">Guardar el resultado</span></strong></h4>
<p>Por último se guarda la información en un archivo con extension *.csv y se nombra el archivo con un nombre intuitivo con minúsculas, gión bajo y con una fecha. Se recomienda realizar la geocodificación semanal para una localidad y el nombre del archivo se usara para la geocodificación</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="hotspotsr.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(z, <span class="at">file =</span> <span class="st">&quot;pos_poza_rica_2021_04_05.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="head-dim-y-names" class="section level4" number="4.2.1.5">
<h4><span class="header-section-number">4.2.1.5</span> <strong><span style="color:#660033;">head(), dim() y names()</span></strong></h4>
<p>Estos funciones tienen como objetivo explorar la base.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="hotspotsr.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(y)   <span class="co"># proporciona el número de columnas y filas de la base de datos.</span></span></code></pre></div>
<pre><code>## [1]  2 27</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="hotspotsr.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(y) <span class="co"># Proporciona el nombre de las columnas.</span></span></code></pre></div>
<pre><code>##  [1] &quot;VEC_ID&quot;              &quot;IDE_EDA_ANO&quot;         &quot;IDE_SEX&quot;            
##  [4] &quot;DES_CAL&quot;             &quot;IDE_CAL&quot;             &quot;NUM_EXT&quot;            
##  [7] &quot;NUM_INT&quot;             &quot;IDE_COL&quot;             &quot;IDE_CP&quot;             
## [10] &quot;CVE_LOC_RES&quot;         &quot;DES_LOC_RES&quot;         &quot;CVE_MPO_RES&quot;        
## [13] &quot;DES_MPO_RES&quot;         &quot;DES_JUR_RES&quot;         &quot;CVE_EDO_RES&quot;        
## [16] &quot;DES_EDO_RES&quot;         &quot;ESTATUS_CASO&quot;        &quot;CVE_DIAG_PROBABLE&quot;  
## [19] &quot;DES_DIAG_PROBABLE&quot;   &quot;DES_DIAG_FINAL&quot;      &quot;FEC_INI_SIGNOS_SINT&quot;
## [22] &quot;ANO&quot;                 &quot;SEM&quot;                 &quot;MANEJO&quot;             
## [25] &quot;DES_INS_UNIDAD&quot;      &quot;DENGUE_SER_TRIPLEX&quot;  &quot;FEC_INGRESO&quot;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="hotspotsr.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(y)  <span class="co"># proporciona los primero seis registro.</span></span></code></pre></div>
<pre><code>##    VEC_ID IDE_EDA_ANO IDE_SEX DES_CAL     IDE_CAL NUM_EXT NUM_INT
## 1: 886120           9       2   CALLE      MADVID      19        
## 2: 889065          27       1   CALLE RIO CAZONES     110        
##                           IDE_COL IDE_CP CVE_LOC_RES          DES_LOC_RES
## 1:           AGUSTÍN LARA Colonia  93270           1 POZA RICA DE HIDALGO
## 2: MIGUEL HIDALGO Fraccionamiento  93319           1 POZA RICA DE HIDALGO
##    CVE_MPO_RES          DES_MPO_RES DES_JUR_RES CVE_EDO_RES DES_EDO_RES
## 1:         131 POZA RICA DE HIDALGO   POZA RICA          30    VERACRUZ
## 2:         131 POZA RICA DE HIDALGO   POZA RICA          30    VERACRUZ
##    ESTATUS_CASO CVE_DIAG_PROBABLE           DES_DIAG_PROBABLE
## 1:            2                 2 DENGUE CON SIGNOS DE ALARMA
## 2:            2                 2 DENGUE CON SIGNOS DE ALARMA
##                 DES_DIAG_FINAL FEC_INI_SIGNOS_SINT  ANO SEM MANEJO
## 1: DENGUE CON SIGNOS DE ALARMA          2021-01-24 2021   4      1
## 2: DENGUE CON SIGNOS DE ALARMA          2021-03-23 2021  12      1
##    DES_INS_UNIDAD DENGUE_SER_TRIPLEX FEC_INGRESO
## 1:           IMSS                 NA  2021-01-27
## 2:           IMSS                  2  2021-03-25</code></pre>
<p>Esta funcion nos proporciona o presenta la base.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="hotspotsr.html#cb11-1" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(y)</span></code></pre></div>
<div id="htmlwidget-8449df8a36b6c55f58af" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-8449df8a36b6c55f58af">{"x":{"filter":"none","data":[["1","2"],[886120,889065],[9,27],[2,1],["CALLE","CALLE"],["MADVID","RIO CAZONES"],["19","110"],["",""],["AGUSTÍN LARA Colonia","MIGUEL HIDALGO Fraccionamiento"],[93270,93319],[1,1],["POZA RICA DE HIDALGO","POZA RICA DE HIDALGO"],[131,131],["POZA RICA DE HIDALGO","POZA RICA DE HIDALGO"],["POZA RICA","POZA RICA"],[30,30],["VERACRUZ","VERACRUZ"],[2,2],[2,2],["DENGUE CON SIGNOS DE ALARMA","DENGUE CON SIGNOS DE ALARMA"],["DENGUE CON SIGNOS DE ALARMA","DENGUE CON SIGNOS DE ALARMA"],["2021-01-24","2021-03-23"],[2021,2021],[4,12],[1,1],["IMSS","IMSS"],[null,2],["2021-01-27","2021-03-25"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>VEC_ID<\/th>\n      <th>IDE_EDA_ANO<\/th>\n      <th>IDE_SEX<\/th>\n      <th>DES_CAL<\/th>\n      <th>IDE_CAL<\/th>\n      <th>NUM_EXT<\/th>\n      <th>NUM_INT<\/th>\n      <th>IDE_COL<\/th>\n      <th>IDE_CP<\/th>\n      <th>CVE_LOC_RES<\/th>\n      <th>DES_LOC_RES<\/th>\n      <th>CVE_MPO_RES<\/th>\n      <th>DES_MPO_RES<\/th>\n      <th>DES_JUR_RES<\/th>\n      <th>CVE_EDO_RES<\/th>\n      <th>DES_EDO_RES<\/th>\n      <th>ESTATUS_CASO<\/th>\n      <th>CVE_DIAG_PROBABLE<\/th>\n      <th>DES_DIAG_PROBABLE<\/th>\n      <th>DES_DIAG_FINAL<\/th>\n      <th>FEC_INI_SIGNOS_SINT<\/th>\n      <th>ANO<\/th>\n      <th>SEM<\/th>\n      <th>MANEJO<\/th>\n      <th>DES_INS_UNIDAD<\/th>\n      <th>DENGUE_SER_TRIPLEX<\/th>\n      <th>FEC_INGRESO<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,9,10,12,15,17,18,22,23,24,26]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="subir-el-csv-a-y-creamos-el-vector-de-direcciones" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> <strong><span style="color:#660033;">Subir el csv a</span></strong> <img src="https://d33wubrfki0l68.cloudfront.net/62bcc8535a06077094ca3c29c383e37ad7334311/a263f/assets/img/logo.svg" style="width:10.0%" /> <strong><span style="color:#003300;">y creamos el vector de direcciones</span></strong></h3>
<p>Para subir el csv creado en el paso 4.2.1 y crear el vector de direcciones de los domicilios de los casos de dengue con el objeto de geocodificarlos, se usa la funcion <strong><em><a href="">denhotspots::data_geocoden</a></em></strong>. La función <strong><em><a href="">data_geocoden</a></em></strong> tiene tres argumentos: <strong><span style="color:#7d9029">infile</span></strong> hace referencia al nombre del archivo cvs que creo en el apartado previo (4.2.1.4 Guardar el resultado), <strong><span style="color:#7d9029">data</span></strong> es un argumento lógico (TRUE o FALSE) para definir si la función te regresa la base de datos completa o solo el vector de direcciones (como solo se va geocodificar solo se usa el vector de direcciones y en este caso el valor del argumento es FALSE), y <strong><span style="color:#7d9029">sinave_new</span></strong> es un valor logico para definir si la base del <strong><a href="">SINAVE</a></strong> es la reciente (nueva) o no. Esta dicotomía obedece a que después del 2015 (ingreso del Chikungunya (CHIKV) y Zika (ZIKV) en México), es decir el 2016, las bases de datos de dengue fueron modificadas para incluir más información de acuerdo a la situación epidemiologica provocada por el ZIKV y CHIKV.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="hotspotsr.html#cb12-1" aria-hidden="true" tabindex="-1"></a>addresses <span class="ot">&lt;-</span> denhotspots<span class="sc">::</span><span class="fu">data_geocoden</span>(<span class="at">infile =</span> <span class="st">&quot;pos_poza_rica_2021_04_05&quot;</span>,</span>
<span id="cb12-2"><a href="hotspotsr.html#cb12-2" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">data =</span> <span class="cn">FALSE</span>,</span>
<span id="cb12-3"><a href="hotspotsr.html#cb12-3" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">sinave_new =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="realizar-la-geocodificación" class="section level3" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> <strong><span style="color:#660033;">Realizar la geocodificación</span></strong></h3>
<div id="manipulación-de-texto" class="section level4" number="4.2.3.1">
<h4><span class="header-section-number">4.2.3.1</span> <strong><span style="color:#660033;">manipulación de texto</span></strong></h4>
<p>Los algoritmos de google y R para geocodificación funciona bien para las áreas urbanas, pero no para las áreas rurales, debido a que en las áreas rurales la forma de definir las direcciones no son homogeneas y a menudo define la direccion del domicilio con referencias como a lado de la tienda Diconsa, o a lado del taller mecánico x, o domicilio conocido. Estas formas de referencias funcionan perfectamente localmente, pero para las computadoras y los códigos no han sido adiestrados para saber como intepretar y regresar las coordenadas geográficas. En la ciudades tambien ocurren detalles que no permiten regresar las coordenas geográficas, aunque en menor frecuencia y por otras causas distintas que en la áreas rurales. En las áreas urbanas es comón que el número de la casa le antepongan el gato # y el gato y todos lo que se sigue es ignorado por R y causa error y no se logra el objetivo que es geocodificar la direccion.</p>
<p>Para resolver este problema se tiene que manipular el texto (las direcciones son texto (“string”). Esto se logra a través de dos pasos una vez identificado el problema. El primero es definir si el error es solo de una dirección o de muchas y el segundo paso es resolver el problema sustituyendo o eliminando el caracter indentificado que causo el error.</p>
<p>Una ves interrumpida la geocodificación por el error se usa la función <strong><em><a href="">stringr::str_subset</a></em></strong>, la cual tiene dos argumentos: <strong><span style="color:#7d9029">string</span></strong> y <strong><span style="color:#7d9029">pattern</span></strong>. En el primer argumento se pone el vector de direcciones (addresses) que estamos geocodificando y en el segundo argumento el valor es el caracter que causo la interrupción del problema. La función te regresa un vector con uno o mas elementos donde el mismo caracter causaría problema de no resolverse y continuamente la geocodificación se interrumpirá</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="hotspotsr.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) </span></span>
<span id="cb13-2"><a href="hotspotsr.html#cb13-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_subset</span>(<span class="at">string =</span> addresses, </span>
<span id="cb13-3"><a href="hotspotsr.html#cb13-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">pattern =</span> <span class="st">&quot;#&quot;</span>) <span class="co"># NA, &quot;Domicilio Conocido&quot;</span></span></code></pre></div>
<pre><code>## character(0)</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="hotspotsr.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#stringr::str_subset(addresses, pattern = &quot;#|Domicilio Conocido&quot;) </span></span></code></pre></div>
<p>Definido si el patrón del problema es único o se repite en varias direcciones que estamos geocodificando, usamos la función <strong><em><a href="">stringr::str_replace_all</a></em></strong> o realizamos el cambio directamente solo en la dirección que causo el problema.</p>
<p>La función <strong><em><a href="">str_replace_all</a></em></strong> tiene tres argumentos:
<strong><span style="color:#7d9029">string</span></strong>, <strong><span style="color:#7d9029">pattern</span></strong> y <strong><span style="color:#7d9029">replacement</span></strong>. En el argumento <strong><span style="color:#7d9029">string</span></strong> el valor es el vector de direcciones que estamos geocodificando, en el argumento <strong><span style="color:#7d9029">pattern</span></strong> el valor es el caracter que causo el problema y en el argumento <strong><span style="color:#7d9029">replacement</span></strong> se pone el caracter que va remplazar al caracter que causo la interrupción en la geocodificación (en el ejemplo solo espacio blanco sustituye al gato #).</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="hotspotsr.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2.1)</span></span>
<span id="cb16-2"><a href="hotspotsr.html#cb16-2" aria-hidden="true" tabindex="-1"></a>addresses <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="at">string =</span> addresses,</span>
<span id="cb16-3"><a href="hotspotsr.html#cb16-3" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">pattern =</span> <span class="st">&quot; #&quot;</span>,</span>
<span id="cb16-4"><a href="hotspotsr.html#cb16-4" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">replacement =</span> <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<p>Tambien tenemo la opción de reemplazar el error directamente.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="hotspotsr.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2.2)</span></span>
<span id="cb17-2"><a href="hotspotsr.html#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># supon que la dirección donde se interrumpio fue</span></span>
<span id="cb17-3"><a href="hotspotsr.html#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co">#addresses[100]</span></span>
<span id="cb17-4"><a href="hotspotsr.html#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&quot;Domicilio conocido, San Luis La Loma, Tecpan, Guerrero,Mexico&quot;</span></span>
<span id="cb17-5"><a href="hotspotsr.html#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co"># identificamos que el problema fue &quot;Domicilio conocido&quot;</span></span>
<span id="cb17-6"><a href="hotspotsr.html#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Así que sustituimos directamente con el siguiente código</span></span>
<span id="cb17-7"><a href="hotspotsr.html#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co">#addresses[100] &lt;- &quot;San Luis La Loma, Tecpan, Guerrero,Mexico&quot;</span></span>
<span id="cb17-8"><a href="hotspotsr.html#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co"># y la geocodificación continua hasta el final si no encuentra errores</span></span></code></pre></div>
</div>
<div id="geocodificación." class="section level4" number="4.2.3.2">
<h4><span class="header-section-number">4.2.3.2</span> <strong><span style="color:#660033;">Geocodificación.</span></strong></h4>
<p>La geocodificación se realiza con la función <strong><em><a href="https://github.com/fdzul/denhotspots/blob/master/R/geocoden.R">denhotspots::geocoden</a></em></strong> traves de la función <strong><a href="">geocode</a></strong> del paquete <strong><em><a href="">ggmap</a></em></strong>. La función <strong><em><a href="">geocoden</a></em></strong> solo tiene el argumento <strong><span style="color:#7d9029">infile</span></strong> que es el nombre del archivo csv que se generó en el apartado 2.1. en este caso el valor es “pos_poza_rica_2021_04_05”. La función tiene cuidado en guardar en un archivo temporal, el resultado después de que cada dirección sea geocodificada, al final guarda en nuestro directorio de trabajo un archivo con extensión rds con el mismo nombre que asignado al argumento <strong><span style="color:#7d9029">infile</span></strong>. El resultado es una base de datos con las coordenadas geográficas.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="hotspotsr.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggmap)</span>
<span id="cb18-2"><a href="hotspotsr.html#cb18-2" aria-hidden="true" tabindex="-1"></a>denhotspots<span class="sc">::</span><span class="fu">geocoden</span>(<span class="at">infile =</span> <span class="st">&quot;pos_poza_rica_2021_04_05&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Working on index 1 of 1&quot;
## [1] &quot;OK&quot;</code></pre>
</div>
</div>
<div id="guardar-la-información-en-rdata" class="section level3" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> <strong><span style="color:#660033;">Guardar la información en RData</span></strong></h3>
<p>El resultado de la geocodificación es una base de datos con las coordenadas geográficas sin las columnas de interes como año, semana, serotipo etc.
Por esta razón se debe subir la base de casos geocodificados y la base de casos original para unir ambas bases y tengamos una base de datos completa y geocodificada. El procedimiento se realiza en tres pasos, primero se sube la base de datos geocodificada, acto seguido se sube la base de datos de dengue y tercero se eliminan los duplicados en la base geocodificada. Al final Ambas bases se unen y se guardan</p>
<div id="subir-la-base-geocodificada" class="section level4" number="4.2.4.1">
<h4><span class="header-section-number">4.2.4.1</span> <strong><span style="color:#660033;">Subir la base geocodificada</span></strong></h4>
<p>Para subir la base de geocodificada a través de la función <strong><em><a href="">readRDS::base</a></em></strong>, se pone en el argumento <strong><span style="color:#7d9029">file</span></strong> la dirección donde se guardo el archivo con extensión *rds de la base geocodificada.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="hotspotsr.html#cb20-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;C:/Users/felip/Dropbox/r_developments/r_bookdowns/manual_hotspots/pos_poza_rica_2021_04_05_temp_geocoded.rds&quot;</span>)</span></code></pre></div>
</div>
<div id="subir-la-base-de-casos" class="section level4" number="4.2.4.2">
<h4><span class="header-section-number">4.2.4.2</span> <strong><span style="color:#660033;">Subir la base de casos</span></strong></h4>
<p>Para subir la base de los casos se utiliza la funcion <strong><em><a href="">denhotspots::data_geocoden</a></em></strong> como se uso para subir el vector de direcciones (ver en el 2.3 la descripción de la función), solo que en este caso el valor del argumento <strong><span style="color:#7d9029">data</span></strong> cambia a TRUE (por que queremos subir los datos y no las direcciones). Los dos argumento (<strong><span style="color:#7d9029">infile</span></strong> y <strong><span style="color:#7d9029">sinave_new</span></strong>) permanecen iguales..</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="hotspotsr.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Subir la base de datos de dengue</span></span>
<span id="cb21-2"><a href="hotspotsr.html#cb21-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> denhotspots<span class="sc">::</span><span class="fu">data_geocoden</span>(<span class="at">infile =</span> <span class="st">&quot;pos_poza_rica_2021_04_05&quot;</span>, </span>
<span id="cb21-3"><a href="hotspotsr.html#cb21-3" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">data =</span> <span class="cn">TRUE</span>,</span>
<span id="cb21-4"><a href="hotspotsr.html#cb21-4" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">sinave_new =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="eliminar-duplicados-y-guardar" class="section level4" number="4.2.4.3">
<h4><span class="header-section-number">4.2.4.3</span> <strong><span style="color:#660033;">Eliminar duplicados y guardar</span></strong></h4>
<p>Una vez, subidas las bases de los casos geocodificados y la base de dengue original en el ambiente de trabajo, se eliminan los duplicados en la base geocodificada, se unen ambas bases y se guardan en un directorio específico. Para realizar este último paso se ocupa la función <strong><em><a href="">denhotspots::save_geocoden</a></em></strong>, la cual tiene cuatro argumentos: <strong><span style="color:#7d9029">x</span></strong> es la base de datos geocodificada, <strong><span style="color:#7d9029">y</span></strong> es la base de datos original de dengue, <strong><span style="color:#7d9029">directory</span></strong> es la carpeta donde se va guardar el archivo con extensión R.Data &amp; <strong><span style="color:#7d9029">loc</span></strong> es el nombre del archivo con el que se va guardar (es el mismo nombre que uso el valor del argumento <strong><span style="color:#7d9029">infile</span></strong>).</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="hotspotsr.html#cb22-1" aria-hidden="true" tabindex="-1"></a>denhotspots<span class="sc">::</span><span class="fu">save_geocoden</span>(<span class="at">x =</span> z,</span>
<span id="cb22-2"><a href="hotspotsr.html#cb22-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">y =</span> data,</span>
<span id="cb22-3"><a href="hotspotsr.html#cb22-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">directory =</span> <span class="st">&quot;RData_geocoded&quot;</span>,</span>
<span id="cb22-4"><a href="hotspotsr.html#cb22-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">loc =</span> <span class="st">&quot;pos_poza_rica_2021_04_05&quot;</span>)</span></code></pre></div>
<p>Hasta este punto las base de los casos de dengue esta geocodificada y esta lista para usarse para hacer la visualización a traves de mapas o cualquier análisis espacial que se desee implementar en el programa de dengue.</p>
</div>
</div>
</div>
<div id="bajar-los-shapefile-del-inegi." class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> <strong><span style="color:#003300;">Bajar los shapefile del <a href="https://www.inegi.org.mx/">INEGI</a>.</span></strong></h2>
<p>La resolución de la información cartográfica que se requiere para realizar el analisis de los hotspots a nivel de ciudad es el AGEB (Área Geoestadística Básica) y esta disponible en la página oficial del inegi en la siguiente dirección <a href="https://www.inegi.org.mx/app/biblioteca/ficha.html?upc=889463807469" class="uri">https://www.inegi.org.mx/app/biblioteca/ficha.html?upc=889463807469</a> con el nombre de Marco Geoestadístico (MG) Censo de Población y Vivienda 2020. La misma información cartográfica esta disponible en R en un paquete llamado <strong><em><a href="https://github.com/fdzul/rgeomex">rgeomex</a></em></strong> alojado en la página de github (<a href="https://github.com/fdzul/rgeomex" class="uri">https://github.com/fdzul/rgeomex</a>). El paquete se instala en tecleando en la consola de R o Rstudio lo siguiente:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="hotspotsr.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github(&quot;fdzul/rgeomex&quot;)</span></span></code></pre></div>
<p>ó</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="hotspotsr.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#remotes::install_github(&quot;fdzul/rgeomex&quot;)</span></span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="hotspotsr.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code></pre></div>
<pre><code>## Linking to GEOS 3.9.0, GDAL 3.2.1, PROJ 7.2.1</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="hotspotsr.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb27-2"><a href="hotspotsr.html#cb27-2" aria-hidden="true" tabindex="-1"></a>xal <span class="ot">&lt;-</span> rgeomex<span class="sc">::</span><span class="fu">extract_ageb</span>(<span class="at">locality =</span> <span class="st">&quot;Xalapa de Enriquez&quot;</span>, </span>
<span id="cb27-3"><a href="hotspotsr.html#cb27-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">cve_geo =</span> <span class="st">&quot;30&quot;</span>)</span></code></pre></div>
<pre><code>## although coordinates are longitude/latitude, st_intersects assumes that they are planar</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="hotspotsr.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(sf<span class="sc">::</span><span class="fu">st_geometry</span>(xal<span class="sc">$</span>ageb)) </span></code></pre></div>
<p><img src="manual_hotspots_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="hotspotsr.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb30-2"><a href="hotspotsr.html#cb30-2" aria-hidden="true" tabindex="-1"></a>ver <span class="ot">&lt;-</span> rgeomex<span class="sc">::</span><span class="fu">extract_ageb</span>(<span class="at">locality =</span> <span class="fu">c</span>(<span class="st">&quot;Veracruz&quot;</span>, <span class="st">&quot;Boca del Río&quot;</span>), <span class="at">cve_geo =</span> <span class="st">&quot;30&quot;</span>)</span></code></pre></div>
<pre><code>## although coordinates are longitude/latitude, st_intersects assumes that they are planar</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="hotspotsr.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(sf<span class="sc">::</span><span class="fu">st_geometry</span>(ver<span class="sc">$</span>ageb)) </span></code></pre></div>
<p><img src="manual_hotspots_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
</div>
<div id="contar-el-número-de-casos-por-ageb-agregación-espacial." class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> <strong><span style="color:#003300;">Contar el número de casos por AGEB (agregación espacial).</span></strong></h2>
<p>La base de datos geocodificada es convertida a un objeto sf y a una base de patrón de puntos espaciales. Entonces, se cuentan cuantos casos existen por cada unidad espacial, en este caso AGEB (pero puede ser por manzana, colonia, sector etc). El proceso de agregación se realiza en tres pasos, primero se sube la base (o las bases), segundo se sube la información cartografica (paso anterior) y tercero se realiza la agregación espacial. El conteo de los casos por AGEB es realizado por la función
<strong><em><a href="">denhotspots::point_to_polygon</a></em></strong>
del paquete <strong><a href="">denhotspots</a></strong>. La función cuenta con siete argumentos:</p>
<table>
<thead>
<tr>
<th style="text-align:left;">
Argumento
</th>
<th style="text-align:left;">
Definición
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
x
</td>
<td style="text-align:left;">
es la base de datos de dengue geocodificada
</td>
</tr>
<tr>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
es la base de datos de AGEBs
</td>
</tr>
<tr>
<td style="text-align:left;">
ids
</td>
<td style="text-align:left;">
son todas las columnas excepto geometry
</td>
</tr>
<tr>
<td style="text-align:left;">
time
</td>
<td style="text-align:left;">
es la resolución temporal de la base de datos de dengue
</td>
</tr>
<tr>
<td style="text-align:left;">
coords
</td>
<td style="text-align:left;">
son las coordenadas de la base de dengue
</td>
</tr>
<tr>
<td style="text-align:left;">
crs
</td>
<td style="text-align:left;">
es el sistema de referencia de las coordenadas
</td>
</tr>
<tr>
<td style="text-align:left;">
dis
</td>
<td style="text-align:left;">
es el prefijo la enfermedad
</td>
</tr>
</tbody>
</table>
<div id="subir-la-base-datos-geocodificada." class="section level3" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> <strong><span style="color:#660033;">subir la base datos geocodificada.</span></strong></h3>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="hotspotsr.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;C:/Users/felip/OneDrive/proyects/priority_research_projects/hotspots_high_risk_localities_138/8.RData/geocoded_dataset.RData&quot;</span>)</span></code></pre></div>
</div>
<div id="subir-los-agebs." class="section level3" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> <strong><span style="color:#660033;">subir los AGEBs.</span></strong></h3>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="hotspotsr.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb34-2"><a href="hotspotsr.html#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb34-3"><a href="hotspotsr.html#cb34-3" aria-hidden="true" tabindex="-1"></a>ver <span class="ot">&lt;-</span> rgeomex<span class="sc">::</span><span class="fu">extract_ageb</span>(<span class="at">locality =</span> <span class="fu">c</span>(<span class="st">&quot;Veracruz&quot;</span>, </span>
<span id="cb34-4"><a href="hotspotsr.html#cb34-4" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">&quot;Boca del Río&quot;</span>),</span>
<span id="cb34-5"><a href="hotspotsr.html#cb34-5" aria-hidden="true" tabindex="-1"></a>                            <span class="at">cve_geo =</span> <span class="st">&quot;30&quot;</span>)</span></code></pre></div>
<pre><code>## although coordinates are longitude/latitude, st_intersects assumes that they are planar</code></pre>
</div>
<div id="realizar-la-agregación-espacial." class="section level3" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> <strong><span style="color:#660033;"> Realizar la agregación espacial.</span></strong></h3>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="hotspotsr.html#cb36-1" aria-hidden="true" tabindex="-1"></a>ver_casos <span class="ot">&lt;-</span> denhotspots<span class="sc">::</span><span class="fu">point_to_polygons</span>(<span class="at">x =</span> y,</span>
<span id="cb36-2"><a href="hotspotsr.html#cb36-2" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">y =</span> ver<span class="sc">$</span>ageb,</span>
<span id="cb36-3"><a href="hotspotsr.html#cb36-3" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">ids =</span> <span class="fu">c</span>(<span class="fu">names</span>(ver<span class="sc">$</span>ageb)[<span class="dv">1</span><span class="sc">:</span>(<span class="fu">ncol</span>(ver<span class="sc">$</span>ageb)<span class="sc">-</span><span class="dv">1</span>)]),</span>
<span id="cb36-4"><a href="hotspotsr.html#cb36-4" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">time =</span> ANO,</span>
<span id="cb36-5"><a href="hotspotsr.html#cb36-5" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;long&quot;</span>, <span class="st">&quot;lat&quot;</span>),</span>
<span id="cb36-6"><a href="hotspotsr.html#cb36-6" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">crs =</span> <span class="dv">4326</span>,</span>
<span id="cb36-7"><a href="hotspotsr.html#cb36-7" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">dis =</span> <span class="st">&quot;DENV&quot;</span>)</span></code></pre></div>
<pre><code>## although coordinates are longitude/latitude, st_contains assumes that they are planar
## although coordinates are longitude/latitude, st_contains assumes that they are planar
## although coordinates are longitude/latitude, st_contains assumes that they are planar
## although coordinates are longitude/latitude, st_contains assumes that they are planar
## although coordinates are longitude/latitude, st_contains assumes that they are planar
## although coordinates are longitude/latitude, st_contains assumes that they are planar
## although coordinates are longitude/latitude, st_contains assumes that they are planar
## although coordinates are longitude/latitude, st_contains assumes that they are planar
## although coordinates are longitude/latitude, st_contains assumes that they are planar
## although coordinates are longitude/latitude, st_contains assumes that they are planar
## although coordinates are longitude/latitude, st_contains assumes that they are planar
## although coordinates are longitude/latitude, st_contains assumes that they are planar
## although coordinates are longitude/latitude, st_contains assumes that they are planar</code></pre>
</div>
</div>
<div id="pasos-6-10.-cálcular-el-z-score-de-los-casos-a-calcular-los-hotspots." class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> <strong><span style="color:#003300;">Pasos 6-10. Cálcular el Z-score de los casos a Calcular los hotspots.</span></strong></h2>
<p>Los pasos seis (Z-score) a diéz (calcular los hotspots) son realizados por la
función <strong><em><a href="">denhotspots::gihi</a></em></strong> del paquete denhotspots. La función tiene seis argumentos</p>
<table>
<thead>
<tr>
<th style="text-align:left;">
Argumento
</th>
<th style="text-align:left;">
Definición
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
x
</td>
<td style="text-align:left;">
es la base de datos del AGEB con los casos de dengue
</td>
</tr>
<tr>
<td style="text-align:left;">
gi_hi
</td>
<td style="text-align:left;">
define el estadístico espacial local. <span class="math inline">\(G_{i}^{*}\)</span>, <span class="math inline">\(H_{i}^{*}\)</span> ó ambos
</td>
</tr>
<tr>
<td style="text-align:left;">
id
</td>
<td style="text-align:left;">
son todas las columnas de excepto geometry
</td>
</tr>
<tr>
<td style="text-align:left;">
time
</td>
<td style="text-align:left;">
es la resolución temporal de la base de datos de dengue
</td>
</tr>
<tr>
<td style="text-align:left;">
dis
</td>
<td style="text-align:left;">
es el prefijo la enfermedad
</td>
</tr>
<tr>
<td style="text-align:left;">
alpha
</td>
<td style="text-align:left;">
es el nivel de significancia. La probabilidad de rechazar la hipótesis nula cuando es verdadera
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="hotspotsr.html#cb38-1" aria-hidden="true" tabindex="-1"></a>hotspots <span class="ot">&lt;-</span> denhotspots<span class="sc">::</span><span class="fu">gihi</span>(<span class="at">x =</span> ver_casos,</span>
<span id="cb38-2"><a href="hotspotsr.html#cb38-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">id =</span> <span class="fu">names</span>(ver_casos)[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>)], </span>
<span id="cb38-3"><a href="hotspotsr.html#cb38-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">time =</span> <span class="st">&quot;year&quot;</span>,</span>
<span id="cb38-4"><a href="hotspotsr.html#cb38-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">dis =</span> <span class="st">&quot;DENV&quot;</span>,</span>
<span id="cb38-5"><a href="hotspotsr.html#cb38-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">gi_hi =</span> <span class="st">&quot;gi&quot;</span>,</span>
<span id="cb38-6"><a href="hotspotsr.html#cb38-6" aria-hidden="true" tabindex="-1"></a>                              <span class="at">alpha =</span> <span class="fl">0.95</span>)</span></code></pre></div>
</div>
<div id="visualizar-los-hotspots." class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> <strong><span style="color:#003300;">Visualizar los hotspots.</span></strong></h2>
<p>La visualización del número de veces que cada AGEB fue hotspots (intensidad) se realiza a través de la función
<strong><em><a href="">denhotspots::staticmap_intensity</a></em></strong>. Esta función cuenta con nueve argumentos.</p>
<table style="NAborder-bottom: 0;">
<thead>
<tr>
<th style="text-align:left;">
Argumento
</th>
<th style="text-align:left;">
Definición
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
x
</td>
<td style="text-align:left;">
es base de datos de los hotspots
</td>
</tr>
<tr>
<td style="text-align:left;">
pal
</td>
<td style="text-align:left;">
es la paleta de colores
</td>
</tr>
<tr>
<td style="text-align:left;">
option
</td>
<td style="text-align:left;">
es la opción para algunos paquetes (viridis)
</td>
</tr>
<tr>
<td style="text-align:left;">
name
</td>
<td style="text-align:left;">
es el nombre de la paleta de colores
</td>
</tr>
<tr>
<td style="text-align:left;">
pal_name
</td>
<td style="text-align:left;">
es valor lógico para indicar si es name o option la paleta
</td>
</tr>
<tr>
<td style="text-align:left;">
breaks
</td>
<td style="text-align:left;">
es la división de la legenda
</td>
</tr>
<tr>
<td style="text-align:left;">
dir_pal
</td>
<td style="text-align:left;">
es la dirección de la peleta
</td>
</tr>
<tr>
<td style="text-align:left;">
x_leg
</td>
<td style="text-align:left;">
es la posición x de la legenda. Valores 0-1
</td>
</tr>
<tr>
<td style="text-align:left;">
y_leg
</td>
<td style="text-align:left;">
es la posición y de la legenda. Valores 0-1
</td>
</tr>
<tr>
<td style="text-align:left;">
ageb
</td>
<td style="text-align:left;">
es un valor lógico para indicar si el mapa es por AGEB
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="padding: 0; " colspan="100%">
<span style="font-style: italic;">Note: </span>
</td>
</tr>
<tr>
<td style="padding: 0; " colspan="100%">
<sup></sup> Los paquetes de colores nombran sus paletas como option o name
</td>
</tr>
</tfoot>
</table>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="hotspotsr.html#cb39-1" aria-hidden="true" tabindex="-1"></a>denhotspots<span class="sc">::</span><span class="fu">staticmap_intensity</span>(<span class="at">x =</span> hotspots,</span>
<span id="cb39-2"><a href="hotspotsr.html#cb39-2" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">pal =</span> rcartocolor<span class="sc">::</span>carto_pal,</span>
<span id="cb39-3"><a href="hotspotsr.html#cb39-3" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">pal_name =</span> <span class="cn">TRUE</span>,</span>
<span id="cb39-4"><a href="hotspotsr.html#cb39-4" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">name =</span> <span class="st">&quot;OrYel&quot;</span>,</span>
<span id="cb39-5"><a href="hotspotsr.html#cb39-5" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">breaks =</span> <span class="dv">1</span>,</span>
<span id="cb39-6"><a href="hotspotsr.html#cb39-6" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">dir_pal =</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb39-7"><a href="hotspotsr.html#cb39-7" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">x_leg =</span> <span class="fl">0.5</span>,</span>
<span id="cb39-8"><a href="hotspotsr.html#cb39-8" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">y_leg =</span> <span class="fl">0.1</span>,</span>
<span id="cb39-9"><a href="hotspotsr.html#cb39-9" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">ageb =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="manual_hotspots_files/figure-html/unnamed-chunk-26-1.png" width="2100" style="display: block; margin: auto;" /></p>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="hotspots.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="clusters.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/fdzul/manual_hotspots/edit/master/04-hotspotsr.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["manual_hotspots.pdf", "manual_hotspots.epub", "manual_hotspots.mobi"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
